(this["webpackJsonpreact-hw-04-movies"]=this["webpackJsonpreact-hw-04-movies"]||[]).push([[0],{38:function(e,t,a){e.exports=a(79)},43:function(e,t,a){},44:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(31),l=a.n(r),o=(a(43),a(6)),u=(a(44),a(7)),i=a(10),m=a.n(i),s={TMDB_API_KEY:"8125804d73b84623c60519ecab083b7f"}.TMDB_API_KEY;m.a.defaults.baseURL="https://api.themoviedb.org/3",m.a.defaults.params={api_key:s};var E=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){m.a.get("/trending/all/week").then((function(e){return e.data})).then((function(e){r(e.results)}))}),[]),c.a.createElement("div",{className:"home-page"},c.a.createElement("h1",null,"Trending today"),c.a.createElement("ul",null,a.map((function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(o.b,{to:"/movies/".concat(e.id)},e.title||e.name))}))))},h=a(9),v=a(1),p=a(12),f=Object(n.createContext)(),b=function(){var e=Object(n.useContext)(f),t=Object(n.useState)([]),a=Object(u.a)(t,2),r=a[0],l=a[1],o=function(){(function(e){return m.a.get("/movie/".concat(e,"/credits")).then((function(e){return e.data}))})(e).then((function(e){l([].concat(Object(p.a)(r),Object(p.a)(e.cast)))}))};return Object(n.useEffect)((function(){o()}),[]),c.a.createElement("div",{className:"Cast"},c.a.createElement("h2",null,"Cast"),c.a.createElement("ul",null,r&&r.map((function(e){return c.a.createElement("li",{key:e.id},e.profile_path?c.a.createElement("img",{width:"100",src:"".concat("https://image.tmdb.org/t/p/w300/").concat(e.profile_path),alt:e.name}):c.a.createElement("b",null,"no image"),c.a.createElement("h4",null,e.name),c.a.createElement("p",null,"Character: ",e.character))}))))},d=function(){var e=Object(n.useContext)(f),t=Object(n.useState)([]),a=Object(u.a)(t,2),r=a[0],l=a[1],o=function(){(function(e){return m.a.get("/movie/".concat(e,"/reviews")).then((function(e){return e.data}))})(e).then((function(e){l([].concat(Object(p.a)(r),Object(p.a)(e.results)))}))};return Object(n.useEffect)((function(){o()}),[]),c.a.createElement("div",{className:"reviews"},c.a.createElement("h2",null,"Reviews"),c.a.createElement("ul",null,r.length&&r.map((function(e){return c.a.createElement("li",{key:e.id},c.a.createElement("h4",null,"Author: ",e.author),c.a.createElement("p",null,e.content))})),!r.length&&c.a.createElement("b",null,"No reviews")))},O=function(e){var t=e.match,a=e.history,r=t.params.movieId,l=t.url,i=Object(n.useState)({}),s=Object(u.a)(i,2),E=s[0],p=s[1],O=function(){(function(e){return m.a.get("/movie/".concat(e)).then((function(e){return e.data}))})(r).then((function(e){p(Object(h.a)(Object(h.a)({},E),e))}))};return Object(n.useEffect)((function(){O()}),[]),c.a.createElement(f.Provider,{value:r},c.a.createElement("div",{className:"movie-details-page"},c.a.createElement("button",{onClick:function(){a.goBack()}},"< back"),E&&c.a.createElement("div",null,E.poster_path?c.a.createElement("img",{src:"".concat("https://image.tmdb.org/t/p/w300/").concat(E.poster_path),alt:E.title}):c.a.createElement("b",null,"no poster"),c.a.createElement("div",null,c.a.createElement("h1",null,E.title),c.a.createElement("p",null,"User Score: ",10*E.vote_average,"%"),c.a.createElement("h3",null,"Overview"),c.a.createElement("p",null,E.overview),c.a.createElement("h3",null,"Genres"),c.a.createElement("p",null,E.genres&&E.genres.map((function(e){return c.a.createElement("span",{key:e.id},e.name,"\xa0\xa0\xa0")})))),c.a.createElement("hr",null),c.a.createElement("h4",null,"Additional inpormation"),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement(o.b,{to:{pathname:"".concat(l,"/cast"),state:{movieId:r}}},"Cast")),c.a.createElement("li",null,c.a.createElement(o.b,{to:{pathname:"".concat(l,"/reviews"),state:{movieId:r}}},"Reviews"))),c.a.createElement("hr",null),c.a.createElement("div",null,c.a.createElement(f.Consumer,null,(function(){return c.a.createElement(v.d,null,c.a.createElement(v.b,{path:"".concat(l,"/cast"),component:b,exact:!0}),c.a.createElement(v.b,{path:"".concat(l,"/reviews"),component:d,exact:!0}),c.a.createElement(v.a,{to:l}))}))))))},j=function(e){var t=e.onSubmit,a=Object(n.useState)(),r=Object(u.a)(a,2),l=r[0],o=r[1];return c.a.createElement("div",{className:"search"},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),t(l)}},c.a.createElement("input",{type:"text",className:"search-input",onChange:function(e){return o(e.target.value)}}),c.a.createElement("button",{type:"submit"},"Search")))},g=a(33),w=a.n(g),k=[{path:"/",label:"Home",isExact:!0,isInMenu:!0,component:E},{path:"/movies",label:"Movies",isExact:!0,isInMenu:!0,component:function(e){var t=e.match,a=e.history,r=e.location,l=Object(n.useState)({search:"",searchResult:[]}),i=Object(u.a)(l,2),s=i[0],E=i[1],v=t.url,p=function(e){return(t=e,m.a.get("/search/movie?query=".concat(t)).then((function(e){return e.data}))).then((function(t){E(Object(h.a)(Object(h.a)({},s),{},{searchResult:t.results})),a.push(Object(h.a)(Object(h.a)({},r),{},{search:"filter=".concat(e)}))}));var t};return Object(n.useEffect)((function(){var e=w.a.parse(r.search).filter;E(Object(h.a)(Object(h.a)({},s),{},{search:e})),s.search&&p(s.search)}),[s.search]),c.a.createElement("div",{className:"movies-page"},c.a.createElement("h1",null,"MoviesPage"),c.a.createElement(j,{onSubmit:p}),c.a.createElement("ul",null,s.searchResult.map((function(e){return c.a.createElement("li",{key:e.id},c.a.createElement(o.b,{to:"".concat(v,"/").concat(e.id)},e.title||e.name))}))))}},{path:"/movies/:movieId",label:"Movie",isExact:!1,isInMenu:!1,component:O}],y=function(){return c.a.createElement("div",{className:"nav-header"},c.a.createElement("ul",null,k.map((function(e){var t=e.path,a=e.isExact,n=e.label;return e.isInMenu&&c.a.createElement("li",{key:t},c.a.createElement(o.c,{exact:a,to:t,className:"nav-link",activeClassName:"active-nav-link"},n))}))))},x=a(34),N=a(35),C=a(37),S=a(36),I=function(e){Object(C.a)(a,e);var t=Object(S.a)(a);function a(){return Object(x.a)(this,a),t.apply(this,arguments)}return Object(N.a)(a,[{key:"render",value:function(){return c.a.createElement("div",{className:"content"},c.a.createElement(v.d,null,k.map((function(e){var t=e.path,a=e.isExact,n=e.component;return c.a.createElement(v.b,{key:t,path:t,component:n,exact:a})})),c.a.createElement(v.a,{to:"/"})))}}]),a}(n.Component);var M=function(){return c.a.createElement(o.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(y,null),c.a.createElement(I,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[38,1,2]]]);
//# sourceMappingURL=main.550bd774.chunk.js.map